<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memo Raccolta Rifiuti</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Rimossa la regola :focus per .gemini-btn */
        .nav-btn:focus {
            outline: 2px solid #4ade80; /* Green-400 */
            outline-offset: 2px;
        }
        /* Rimosse le regole CSS per .modal, .modal-content, .spinner e @keyframes spin */
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <div style="
        background-image: url('sfondorifiuti.jpg');
        background-size: cover;
        background-position: center;
        filter: blur(8px); /* Effetto blur sull'immagine */
        opacity: 0.5; /* Trasparenza dell'immagine */
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: -1; /* Mette lo sfondo dietro a tutto */
    "></div>

    <div class="w-full max-w-2xl mx-auto p-4 sm:p-6">
        <div class="bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg p-6 sm:p-8 text-center">
        CALENDARIO ZONA VERDE  
            <div class="flex justify-center mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-500"><path d="M8 2v4"></path><path d="M16 2v4"></path><path d="M3.5 9.09h17"></path><path d="M21 8.5V20a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8.5"></path><path d="M12 18h.01"></path><path d="M12 14h.01"></path><path d="M16 18h.01"></path><path d="M16 14h.01"></path><path d="M8 18h.01"></path><path d="M8 14h.01"></path></svg>
            </div>
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-4" id="current-day-display"></h1>
            
            <div class="bg-green-50/80 rounded-lg p-4 sm:p-6 mt-4 border border-green-200 min-h-[100px] flex items-center justify-center">
                <p class="text-lg sm:text-xl text-gray-700" id="collection-schedule"></p>
            </div>

            <div class="flex items-center justify-between mt-8">
                <button id="prev-day" class="nav-btn bg-gray-200 text-gray-700 hover:bg-gray-300 font-bold p-3 rounded-full transition-transform transform hover:scale-105">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                </button>
                <button id="go-to-today" class="nav-btn bg-green-500 text-white hover:bg-green-600 font-semibold py-2 px-6 rounded-lg transition-transform transform hover:scale-105">
                    Oggi
                </button>
                <button id="next-day" class="nav-btn bg-gray-200 text-gray-700 hover:bg-gray-300 font-bold p-3 rounded-full transition-transform transform hover:scale-105">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
                </button>
            </div>
            
            </div>
    </div>
    
    <script>
        // --- DATA AND STATE ---
        const schedule = {
            "2025-04-03": "UO", "2025-04-04": "VR", "2025-04-07": "UO", "2025-04-08": "S", "2025-04-09": "C", "2025-04-10": "UO", "2025-04-11": "P", "2025-04-14": "UO", "2025-04-17": "UO", "2025-04-18": "VR", "2025-04-21": "UO VL", "2025-04-22": "S", "2025-04-23": "C", "2025-04-24": "UO", "2025-04-25": "P", "2025-04-28": "UO",
            "2025-05-01": "UO", "2025-05-02": "VR", "2025-05-05": "UO", "2025-05-06": "S", "2025-05-07": "C", "2025-05-08": "UO", "2025-05-09": "P", "2025-05-12": "UO", "2025-05-15": "UO", "2025-05-16": "VR", "2025-05-19": "UO VL", "2025-05-20": "S", "2025-05-21": "C", "2025-05-22": "UO", "2025-05-23": "P", "2025-05-26": "UO", "2025-05-29": "UO", "2025-05-30": "VR",
            "2025-06-02": "UO", "2025-06-03": "S", "2025-06-04": "C", "2025-06-05": "UO", "2025-06-06": "P", "2025-06-09": "UO", "2025-06-12": "UO", "2025-06-13": "VR", "2025-06-16": "UO VL", "2025-06-17": "S", "2025-06-18": "C", "2025-06-19": "UO", "2025-06-20": "P", "2025-06-23": "UO", "2025-06-26": "UO", "2025-06-27": "VR", "2025-06-30": "UO",
            "2025-07-01": "S", "2025-07-02": "C", "2025-07-03": "UO", "2025-07-04": "P", "2025-07-07": "UO", "2025-07-10": "UO", "2025-07-11": "VR", "2025-07-14": "UO VL", "2025-07-15": "S", "2025-07-16": "C", "2025-07-17": "UO", "2025-07-18": "P", "2025-07-21": "UO", "2025-07-24": "UO", "2025-07-25": "VR", "2025-07-28": "UO", "2025-07-29": "S", "2025-07-30": "C", "2025-07-31": "UO",
            "2025-08-01": "P", "2025-08-04": "UO", "2025-08-07": "UO", "2025-08-08": "VR", "2025-08-11": "UO VL", "2025-08-12": "S", "2025-08-13": "C", "2025-08-14": "UO", "2025-08-15": "P", "2025-08-18": "UO", "2025-08-21": "UO", "2025-08-22": "VR", "2025-08-25": "UO", "2025-08-26": "S", "2025-08-27": "C", "2025-08-28": "UO", "2025-08-29": "P",
            "2025-09-01": "UO", "2025-09-04": "UO", "2025-09-05": "VR", "2025-09-08": "UO VL", "2025-09-09": "S", "2025-09-10": "C", "2025-09-11": "UO", "2025-09-12": "P", "2025-09-15": "UO", "2025-09-18": "UO", "2025-09-19": "VR", "2025-09-22": "UO", "2025-09-23": "S", "2025-09-24": "C", "2025-09-25": "UO", "2025-09-26": "P", "2025-09-29": "UO",
            "2025-10-02": "UO", "2025-10-03": "VR", "2025-10-06": "UO VL", "2025-10-07": "S", "2025-10-08": "C", "2025-10-09": "UO", "2025-10-10": "P", "2025-10-13": "UO", "2025-10-16": "UO", "2025-10-17": "VS", "2025-10-20": "UO", "2025-10-21": "S", "2025-10-22": "C", "2025-10-23": "UO", "2025-10-24": "P", "2025-10-27": "UO", "2025-10-30": "UO", "2025-10-31": "VR",
            "2025-11-03": "UO VL", "2025-11-04": "S", "2025-11-05": "C", "2025-11-06": "UO", "2025-11-07": "P", "2025-11-10": "UO", "2025-11-13": "UO", "2025-11-14": "VR", "2025-11-17": "UO", "2025-11-18": "S", "2025-11-19": "C", "2025-11-20": "UO", "2025-11-21": "P", "2025-11-24": "UO", "2025-11-27": "UO", "2025-11-28": "VR",
            "2025-12-01": "UO VL", "2025-12-02": "S", "2025-12-03": "C", "2025-12-04": "UO", "2025-12-05": "P", "2025-12-08": "UO", "2025-12-11": "UO", "2025-12-12": "VR", "2025-12-15": "UO", "2025-12-16": "S", "2025-12-17": "C", "2025-12-18": "UO", "2025-12-19": "P", "2025-12-22": "UO", "2025-12-28": "UO", "2025-12-29": "VL", "2025-12-30": "S", "2025-12-31": "C",
            "2026-01-02": "P", "2026-01-04": "UO", "2026-01-08": "UO", "2026-01-09": "VR", "2026-01-12": "UO", "2026-01-13": "S", "2026-01-14": "C", "2026-01-15": "UO", "2026-01-16": "P", "2026-01-19": "UO", "2026-01-22": "UO", "2026-01-26": "UO VL", "2026-01-27": "S", "2026-01-28": "C", "2026-01-29": "UO", "2026-01-30": "P",
            "2026-02-02": "UO", "2026-02-05": "UO", "2026-02-06": "VR", "2026-02-09": "UO", "2026-02-10": "S", "2026-02-11": "C", "2026-02-12": "UO", "2026-02-13": "P", "2026-02-16": "UO", "2026-02-19": "UO", "2026-02-23": "UO VL", "2026-02-24": "S", "2026-02-25": "C", "2026-02-26": "UO", "2026-02-27": "P",
            "2026-03-02": "UO", "2026-03-05": "UO", "2026-03-06": "VS", "2026-03-09": "UO", "2026-03-10": "S", "2026-03-11": "C", "2026-03-12": "UO", "2026-03-13": "P", "2026-03-16": "UO", "2026-03-19": "UO", "2026-03-23": "UO VL", "2026-03-24": "S", "2026-03-25": "C", "2026-03-26": "UO", "2026-03-27": "P", "2026-03-30": "UO"
        };
        
        const collectionMap = {
            'UO': 'UO (Frazione Organica)', 'S': 'S (Rifiuto Secco)', 'C': 'C (Carta Cartone Tetrapak)', 'P': 'P (Plastica)', 'VR': 'VR (Verde)', 'VL': 'VL (Vetro Lattine)', 'UO VL': 'UO (Frazione Organica) e VL (Vetro Lattine)', 'VS': 'VS (Raccolta straordinaria del verde)'
        };

        let currentDate = new Date();
        // Rimossa la variabile currentCollectionDescription (ora gestita solo dentro updateDisplay)

        // --- DOM ELEMENTS ---
        const currentDayDisplay = document.getElementById('current-day-display');
        const collectionScheduleEl = document.getElementById('collection-schedule');
        // Rimossi gli elementi DOM per input, modal, spinner e text

        // --- CALENDAR LOGIC ---
        function updateDisplay() {
            const displayOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const today = new Date(); today.setHours(0,0,0,0);
            const tomorrow = new Date(today); tomorrow.setDate(today.getDate() + 1);
            
            let datePrefix = '';
            const normalizedCurrentDate = new Date(currentDate); normalizedCurrentDate.setHours(0,0,0,0);

            if (normalizedCurrentDate.getTime() === today.getTime()) datePrefix = 'Oggi, ';
            else if (normalizedCurrentDate.getTime() === tomorrow.getTime()) datePrefix = 'Domani, ';
            
            let formattedDate = currentDate.toLocaleDateString('it-IT', displayOptions);
            formattedDate = datePrefix + formattedDate.charAt(0).toUpperCase() + formattedDate.slice(1);
            currentDayDisplay.innerText = formattedDate;

            const scheduleKey = `${currentDate.getFullYear()}-${String(currentDate.getMonth() + 1).padStart(2, '0')}-${String(currentDate.getDate()).padStart(2, '0')}`;
            const collectionCode = schedule[scheduleKey];
            
            let currentCollectionDescription = "Nessuna raccolta"; // Definita qui
            if (collectionCode) {
                currentCollectionDescription = collectionMap[collectionCode] || collectionCode;
            }

            collectionScheduleEl.innerHTML = `Ãˆ prevista la raccolta di: <br><span class="font-bold text-green-600 text-xl sm:text-2xl mt-2 block">${currentCollectionDescription}</span>`;
        }

        // --- MODAL LOGIC (RIMOSSA) ---
        
        // --- GEMINI API LOGIC (RIMOSSA) ---
        
        // --- EVENT LISTENERS ---
        document.getElementById('next-day').addEventListener('click', () => { currentDate.setDate(currentDate.getDate() + 1); updateDisplay(); });
        document.getElementById('prev-day').addEventListener('click', () => { currentDate.setDate(currentDate.getDate() - 1); updateDisplay(); });
        document.getElementById('go-to-today').addEventListener('click', () => { currentDate = new Date(); updateDisplay(); });
        
        // Rimossi gli event listener per bottoni AI e modale
        
        // --- INITIALIZATION ---
        window.onload = updateDisplay;
    </script>
</body>
</html>

